# Xитмап

## 1. Описание программы

### Что делает программа
Система для автоматического анализа движения объектов на видеозаписях с построением тепловых карт активности. Приложение обнаруживает движущиеся объекты (люди, транспорт), визуализирует зоны активности и предоставляет инструменты для анализа плотности движения.

### Основные возможности
- **Загрузка видео**: поддержка загрузки пользовательских файлов и выбора из готовых образцов
- **Детекция движения**: автоматическое обнаружение и отслеживание движущихся объектов
- **Тепловые карты**: построение карт плотности движения с настраиваемыми параметрами
- **Визуализация результатов**: наложение bounding boxes и heatmap на исходное видео
- **Предпросмотр в реальном времени**: MJPEG стриминг исходного и обработанного видео
- **Экспорт результатов**: скачивание обработанных видеофайлов с наложенными визуальными элементами

### Ограничения
- **Форматы видео**: MP4, AVI, MOV (кодеки, поддерживаемые OpenCV)
- **Максимальный размер файла**: 100MB (настраивается)
- **Разрешение видео**: рекомендуется до 1920x1080
- **Длительность обработки**: зависит от мощности сервера и длины видео
- **Типы объектов**: лучше всего работает с четко выраженными движущимися объектами

## 2. Системные требования

### Минимальные требования
- **CPU**: 2 ядра
- **RAM**: 4 GB
- **Storage**: 1 GB свободного места
- **OS**: Linux, Windows, macOS
- **Docker**: версия 20.10+

### Рекомендуемые требования
- **CPU**: 4+ ядер (для быстрой обработки видео)
- **RAM**: 8+ GB
- **Storage**: 2+ GB свободного места (для временных файлов)
- **GPU**: не требуется, но приветствуется для ускорения OpenCV

### Поддерживаемые платформы
- ✅ Docker Container
- ✅ Linux (Ubuntu 18.04+, CentOS 7+)
- ✅ Windows 10+ (через Docker)
- ✅ macOS 10.15+ (через Docker)

## 3. Запуск и загрузка данных

### Быстрый запуск через Docker
```bash
# Клонирование и запуск
git clone <repository-url>
cd motion-analysis-app
mkdir sample_videos
docker-compose up --build

# Приложение будет доступно по адресу:
# http://localhost:8000
```

### Загрузка данных
1. **Через веб-интерфейс**:
   - Нажмите "Загрузить видео файл" для выбора локального файла
   - Или выберите готовый образец из выпадающего списка
   - Поддерживаемые форматы: MP4, AVI, MOV

2. **Через файловую систему**:
   - Разместите видеофайлы в папке `sample_videos/`
   - Файлы автоматически появятся в списке образцов

### Настройка параметров обработки
После загрузки видео доступны настройки:
- **Минимальная площадь контура**: фильтрация мелких объектов
- **Прозрачность тепловой карты**: интенсивность наложения
- **Временной диапазон**: выбор сегмента для анализа
- **Цветовая схема**: визуальное представление heatmap
- **Отображение элементов**: включение/выключение bounding boxes и heatmap

## 4. Используемые инструменты и технологии

### Backend
- **FastAPI** - современный веб-фреймворк для Python
- **Uvicorn** - ASGI сервер для запуска приложения
- **Pydantic** - валидация данных и модели
- **Jinja2** - шаблонизатор для HTML

### Обработка видео и компьютерное зрение
- **OpenCV 4.8** - компьютерное зрение и обработка изображений
- **NumPy** - численные вычисления и работа с массивами
- **FFmpeg** - кодирование/декодирование видео (через OpenCV)

### Frontend
- **HTML5/CSS3** - структура и стилизация интерфейса
- **Vanilla JavaScript** - клиентская логика без фреймворков
- **MJPEG** - потоковая передача видео для предпросмотра
- **Font Awesome** - иконки интерфейса

### Инфраструктура
- **Docker** - контейнеризация приложения
- **Docker Compose** - оркестрация контейнеров
- **Python 3.9** - язык программирования бэкенда

### Алгоритмы компьютерного зрения
```python
# Основные используемые методы OpenCV
1. cv2.createBackgroundSubtractorMOG2() - фоновое вычитание
2. cv2.findContours() - поиск контуров объектов
3. cv2.boundingRect() - построение ограничивающих рамок
4. cv2.applyColorMap() - применение цветовых карт
5. cv2.addWeighted() - наложение изображений
6. cv2.morphologyEx() - морфологические операции
7. cv2.VideoCapture() - чтение видео потоков
8. cv2.VideoWriter() - запись результатов
```

## 5. Использованные генеративные инструменты

### DeepSeek R1
**Назначение**: Генерация основной архитектуры приложения и алгоритмов обработки видео

**Использовано для**:
- Проектирования структуры FastAPI приложения
- Реализации алгоритмов детекции движения на OpenCV
- Создания системы MJPEG стриминга для предпросмотра
- Разработки механизма фоновой обработки задач
- Генерации базового веб-интерфейса

### Примечание по использованию AI
Все сгенерированные решения были тщательно протестированы и адаптированы под конкретные требования проекта. Код был проверен на корректность работы и оптимизирован для продакшн-среды.

---

**Демо версия**: [cg-hitbox.ipigeon15.ru](http://cg-hitbox.ipigeon15.ru)

*Для вопросов и предложений создавайте Issues в репозитории проекта.*